<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style type="text/css">
	body{
		height: 4000px;
	}
	#div1{
		width: 100px;
		height: 100px;
		position: absolute;
		background: red;
		right: 0;
	}
	</style>
	<script type="text/javascript">
	window.onscroll = function(){
		var oDiv = document.getElementById('div1');
		var scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
		// oDiv.style.top = scrollTop + (document.documentElement.clientHeight - oDiv.offsetHeight)/2 + 'px';
		var t = scrollTop + (document.documentElement.clientHeight - oDiv.offsetHeight)/2;

		//因为除法，会出现小数~,如果目标点是321.5,offsetTop也会一直飘忽不定。所以把目标点 取整。
		startMove(Math.floor(t));
	}


	var timer = null;

	function startMove(iTarget){

		var oDiv = document.getElementById('div1');
		
		clearInterval(timer);

		timer = setInterval(function(){
			var iSpeed = (iTarget - oDiv.offsetTop) / 8;
			iSpeed = iSpeed >0?Math.ceil(iSpeed):Math.floor(iSpeed);
			if(oDiv.offsetTop == iTarget){
				clearInterval(timer);
			}
			else{
				oDiv.style.top = oDiv.offsetTop + iSpeed + 'px';
			}
		},30);

	}
	</script>
</head>
<body>
	<div id="div1"></div>
</body>
</html>